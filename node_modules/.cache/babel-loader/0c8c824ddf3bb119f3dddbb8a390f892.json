{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\unitedremote\\\\git-challenge\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport List from \"./components/List\";\nimport Axios from \"axios\";\nimport moment from \"moment\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleScroll = () => {\n      const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      const body = document.body;\n      const html = document.documentElement;\n      const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n      const windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n        this.fetchAnotherGithub();\n        this.setState({\n          fetchInProgress: true\n        });\n      } else {\n        console.log(\"bottom not reached\");\n      }\n    };\n\n    this.state = {\n      list: [],\n      loading: true,\n      url: \"\",\n      page: 0,\n      fetchInProgress: false\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchGithub();\n    this.fetchAnotherGithub();\n    window.addEventListener(\"scroll\", this.handleScroll, true);\n  }\n\n  componentWillMount() {\n    this.getUrl();\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  increment() {\n    this.setState({\n      page: this.state.page + 1\n    });\n  }\n\n  getDate() {\n    let currentDate = moment().format(\"YYYY-MM-DD\");\n    let startDate = moment().subtract(30, \"days\").format(\"YYYY-MM-DD\");\n    return [startDate, currentDate];\n  }\n\n  getUrl() {\n    let tmpDate = this.getDate();\n    let startDate = tmpDate[0];\n    let currentDate = tmpDate[1];\n    this.setState({\n      url: \"https://api.github.com/search/repositories?q=created:\" + startDate + \"..\" + currentDate + \"&sort=stars&order=desc&page=0\"\n    });\n  }\n\n  getOtherUrl() {\n    this.increment();\n    let page = this.state.page;\n    let tmpDate = this.getDate();\n    let startDate = tmpDate[0];\n    let currentDate = tmpDate[1];\n    this.setState({\n      url: \"https://api.github.com/search/repositories?q=created:\" + startDate + \"..\" + currentDate + \"&sort=stars&order=desc&page=\" + page\n    });\n  }\n\n  fetchAnotherGithub() {\n    this.getOtherUrl();\n    let url = this.state.url;\n    Axios.get(url).then(response => {\n      var info = response.data.items;\n      this.setState({\n        list: this.state.list.concat([...info]),\n        fetchInProgress: false\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  fetchGithub() {\n    let url = this.state.url;\n    Axios.get(url).then(response => {\n      var info = response.data.items;\n      this.setState({\n        list: info,\n        loading: false\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    let list = this.state.list;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(List, {\n      loading: this.state.loading,\n      list: list,\n      onScroll: this.handleScroll,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), React.createElement(\"footer\", {\n      style: {\n        position: \"fixed\",\n        bottom: \"0\",\n        textAlign: \"center\",\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, this.state.fetchInProgress ? React.createElement(\"i\", {\n      className: \"fa fa-spinner fa-spin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }) : React.createElement(\"i\", {\n      className: \"fa fa fa-check-circle\\t\\n\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/unitedremote/git-challenge/src/App.js"],"names":["React","Component","List","Axios","moment","App","constructor","props","handleScroll","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","fetchAnotherGithub","setState","fetchInProgress","console","log","state","list","loading","url","page","bind","componentDidMount","fetchGithub","addEventListener","componentWillMount","getUrl","removeEventListener","increment","getDate","currentDate","format","startDate","subtract","tmpDate","getOtherUrl","get","then","response","info","data","items","concat","catch","error","render","position","bottom","textAlign","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport List from \"./components/List\";\nimport Axios from \"axios\";\nimport moment from \"moment\";\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      loading: true,\n      url: \"\",\n      page: 0,\n      fetchInProgress: false\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n  componentDidMount() {\n    this.fetchGithub();\n    this.fetchAnotherGithub();\n    window.addEventListener(\"scroll\", this.handleScroll, true);\n  }\n  componentWillMount() {\n    this.getUrl();\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n  increment() {\n    this.setState({\n      page: this.state.page + 1\n    });\n  }\n  getDate() {\n    let currentDate = moment().format(\"YYYY-MM-DD\");\n    let startDate = moment()\n      .subtract(30, \"days\")\n      .format(\"YYYY-MM-DD\");\n    return [startDate, currentDate];\n  }\n  getUrl() {\n    let tmpDate = this.getDate();\n    let startDate = tmpDate[0];\n    let currentDate = tmpDate[1];\n    this.setState({\n      url:\n        \"https://api.github.com/search/repositories?q=created:\" +\n        startDate +\n        \"..\" +\n        currentDate +\n        \"&sort=stars&order=desc&page=0\"\n    });\n  }\n  getOtherUrl() {\n    this.increment();\n    let page = this.state.page;\n    let tmpDate = this.getDate();\n    let startDate = tmpDate[0];\n    let currentDate = tmpDate[1];\n    this.setState({\n      url:\n        \"https://api.github.com/search/repositories?q=created:\" +\n        startDate +\n        \"..\" +\n        currentDate +\n        \"&sort=stars&order=desc&page=\" +\n        page\n    });\n  }\n  fetchAnotherGithub() {\n    this.getOtherUrl();\n    let url = this.state.url;\n    Axios.get(url)\n      .then(response => {\n        var info = response.data.items;\n        this.setState({\n          list: this.state.list.concat([...info]),\n          fetchInProgress: false,\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n  fetchGithub() {\n    let url = this.state.url;\n    Axios.get(url)\n      .then(response => {\n        var info = response.data.items;\n        this.setState({\n          list: info,\n          loading: false\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n  handleScroll = () => {\n    const windowHeight =\n      \"innerHeight\" in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n    const windowBottom = windowHeight + window.pageYOffset;\n    if (windowBottom >= docHeight) {\n      this.fetchAnotherGithub();\n      this.setState({\n        fetchInProgress: true,\n      })\n    } else {\n      console.log(\"bottom not reached\");\n    }\n  };\n  render() {\n    let list = this.state.list;\n    return (\n      <div>\n              <div>\n        <List loading={this.state.loading} list={list} onScroll={this.handleScroll}/>\n      </div>\n        <footer style={{position:\"fixed\" ,bottom: \"0\",textAlign: \"center\", width:\"100%\"}}>{(this.state.fetchInProgress)?<i className=\"fa fa-spinner fa-spin\" />:<i className=\"fa fa fa-check-circle\t\n\"/>}</footer>\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}